<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <select>
      <option value="">請選擇廠牌</option>
      <option value="">ALU</option>
      <option value="">UT-SDH</option>
      <option value="">Erisson</option>
    </select>    

    <input type="button" value="備料查詢" class="search" onclick="location.href='testFirebase.html'">

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
      import { getDatabase,ref ,set ,child, get } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      const firebaseConfig = {

        apiKey: "AIzaSyBbl2_2Ls_fuVtkIFxlpmAZN3uR3moKUHc",
        authDomain: "tckk-test.firebaseapp.com",
        databaseURL: "https://tckk-test-default-rtdb.firebaseio.com",
        projectId: "tckk-test",
        storageBucket: "tckk-test.appspot.com",
        messagingSenderId: "897765678122",
        appId: "1:897765678122:web:3c4c96abd068576a38b753"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      
      function writeUserData(userId,name,email,imageUrl){
    const db = getDatabase();
    set(ref(db,'devices/'+userId),{
      username:name,
      email:email,
      profile_picture:imageUrl
    });
  }
  function readUserData(userId){
    const dbRef = ref(getDatabase());
    get(child(dbRef, `devices/${userId}`)).then((snapshot) => {
      if (snapshot.exists()) {
        console.log(snapshot.val());
      } else {
        console.log("No data available");
      }
    }).catch((error) => {
    console.error(error);
    });
  }
  
  writeUserData(1,'Gary', 'gary@nutc.edu.tw', 'http://gary.tw');
  writeUserData(2,'Jason', 'jason@nutc.edu.tw', 'http://jason.tw');
  readUserData(1);
  readUserData(2);
  
  </script>
    
</body>
</html>